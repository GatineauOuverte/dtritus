<div ng-show="!showPopulars" class="listview-outlook">
    
    <!-- TODO: Implement grouping as seen on http://metroui.org.ua/lists.html -->
    <a 
       ng-repeat="item in searchResults | orderBy: 'descriptor' | limitTo: searchCount > 10? 3 : 10" 
       ng-attr-href="#/items/{{item.id}}" 
       class="list">
        
        <div class="list-content">
            <span class="list-title">
                {{item.descriptor}}
                <img class="list-item-picture" src="images/{{item.pictureUrl}}" class="cycle polaroid">
            </span>
            <span class="list-subtitle">{{item.category}}</span>
        </div>
    </a>
    
    <div ng-if="searchCount > 10" class="listview-outlook">
        <div ng-repeat="item in (filteredItems = (searchResults | limitTo: 25 | startIndex: 3 | orderBy: ['category', 'descriptor']))" 
             ng-attr-href="#/items/{{item.id}}"
             class="list-group">
            
            <div data-ng-repeat="(group, users) in group(friends, grouping)">
                <h2>{{group}}</h2>        
                <ul>
                    <li data-ng-repeat="user in users">
                        {{ user.name }}
                    </li>
                </ul>
            </div>
            
            <a 
               ng-if="isNewCategory"
               href="" 
               class="group-title">{{item.category}}</a>
            
            <div ng-if="isNewCategory" class="group-content">
                <a href="#" class="list">
                    <div class="list-content">{{item.descriptor}}</div>
                </a>
            </div>
            
            <div ng-if="isNewCategory" class="group-content">
                <a href="#" class="list">
                    <div class="list-content">{{item.descriptor}}</div>
                </a>
            </div>
        </div>
    </div>
</div>
    
<div ng-show="showPopulars" class="listview-outlook">
    <a ng-repeat="item in mostPopularItems" ng-attr-href="#/items/{{item.id}}" class="list">
        <div class="list-content">
            <span class="list-title">
                <i class="icon-star fg-red">{{$index + 1}}</i> 
                {{item.descriptor}}
                <img class="list-item-picture" src="images/{{item.pictureUrl}}" class="cycle polaroid">
            </span>
            <span class="list-subtitle">{{item.category}}</span>
        </div>
    </a>
</div>

<footer ng-show="!showPopulars">
    <span>
        <strong>{{searchCount}}</strong>
        <ng-pluralize 
            count="searchCount" 
            when="{ one: 'item', other: 'items' }"></ng-pluralize>
    </span>
</footer>